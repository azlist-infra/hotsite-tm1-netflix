# ğŸ” Sistema de Componentes de Filtros

Componentes reutilizÃ¡veis para criar filtros consistentes em todo o sistema.

---

## ğŸ“¦ Componentes Criados

### **1. Inputs de Filtro**
- âœ… `GenericSearchFilterInput` - Busca genÃ©rica
- âœ… `ActiveStatusFilterSelect` - Status Ativo/Inativo

### **2. BotÃµes de AÃ§Ã£o**
- âœ… `SearchButton` - BotÃ£o de filtrar/buscar
- âœ… `CleanSearchButton` - BotÃ£o de limpar filtros

---

## ğŸ“‹ Componentes Detalhados

### **1. GenericSearchFilterInput**

Input genÃ©rico de busca com recursos avanÃ§ados.

#### **Recursos:**
- âœ… Suporte a Enter para buscar
- âœ… Label e placeholder customizÃ¡veis
- âœ… Helper text opcional
- âœ… Diferentes tamanhos
- âœ… Estados disabled
- âœ… Flex layout

#### **API:**

```typescript
interface GenericSearchFilterInputProps {
    value: string                    // Valor atual
    onChange: (value: string) => void  // Callback
    onEnter?: () => void             // Callback ao pressionar Enter
    label?: string                   // Label do campo
    placeholder?: string             // Placeholder
    size?: 'sm' | 'md' | 'lg'       // Tamanho
    disabled?: boolean               // Se estÃ¡ desabilitado
    flex?: number | string           // Flex layout
    helperText?: string              // Texto de ajuda
}
```

#### **Exemplos:**

```tsx
// BÃ¡sico
<GenericSearchFilterInput
  value={search}
  onChange={setSearch}
  placeholder="Digite para buscar..."
/>

// Com Enter
<GenericSearchFilterInput
  value={search}
  onChange={setSearch}
  onEnter={handleSearch}
  label="Buscar Cliente"
  placeholder="Nome ou email..."
  helperText="Pressione Enter para buscar"
/>

// Com Flex Layout
<GenericSearchFilterInput
  value={search}
  onChange={setSearch}
  flex={2}  // Ocupa 2x mais espaÃ§o
/>

// Desabilitado
<GenericSearchFilterInput
  value={search}
  onChange={setSearch}
  disabled={isLoading}
/>
```

---

### **2. ActiveStatusFilterSelect**

Select especÃ­fico para filtro de status Ativo/Inativo.

#### **Recursos:**
- âœ… Valores padronizados ('', 'true', 'false')
- âœ… Labels customizÃ¡veis
- âœ… Comum em vÃ¡rios mÃ³dulos
- âœ… Placeholder customizÃ¡vel
- âœ… Diferentes tamanhos

#### **API:**

```typescript
interface ActiveStatusFilterSelectProps {
    value: string                     // '', 'true', 'false'
    onChange: (value: string) => void // Callback
    label?: string                    // Label do campo
    placeholder?: string              // Texto para "Todos"
    size?: 'sm' | 'md' | 'lg'        // Tamanho
    disabled?: boolean                // Se estÃ¡ desabilitado
    flex?: number | string            // Flex layout
    activeLabel?: string              // Texto para "Ativo"
    inactiveLabel?: string            // Texto para "Inativo"
}
```

#### **Valores:**
- `''` = Todos (padrÃ£o)
- `'true'` = Ativo
- `'false'` = Inativo

#### **Exemplos:**

```tsx
// BÃ¡sico
<ActiveStatusFilterSelect
  value={statusFilter}
  onChange={setStatusFilter}
/>

// Customizado
<ActiveStatusFilterSelect
  value={statusFilter}
  onChange={setStatusFilter}
  label="Status do Cliente"
  placeholder="Todos os status"
  activeLabel="Ativado"
  inactiveLabel="Desativado"
  flex={1}
/>

// Desabilitado
<ActiveStatusFilterSelect
  value={statusFilter}
  onChange={setStatusFilter}
  disabled={isLoading}
/>
```

---

### **3. SearchButton**

BotÃ£o de buscar/filtrar com Ã­cone integrado.

#### **Recursos:**
- âœ… Ãcone de busca padrÃ£o
- âœ… Estados de loading
- âœ… Ãcone customizÃ¡vel
- âœ… Modo icon-only
- âœ… Variantes e cores
- âœ… Full width

#### **API:**

```typescript
interface SearchButtonProps {
    onClick: () => void              // Callback
    text?: string                    // Texto (default: 'Filtrar')
    size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl'
    loading?: boolean                // Estado de loading
    loadingText?: string             // Texto durante loading
    disabled?: boolean               // Se estÃ¡ desabilitado
    variant?: 'solid' | 'outline' | 'ghost' | 'subtle'
    colorPalette?: 'blue' | 'green' | 'red' | 'gray'
    iconOnly?: boolean               // Apenas Ã­cone
    icon?: ReactNode                 // Ãcone customizado
    fullWidth?: boolean              // Full width
}
```

#### **Exemplos:**

```tsx
// PadrÃ£o
<SearchButton onClick={handleSearch} />

// Com Loading
<SearchButton 
  onClick={handleSearch} 
  loading={isSearching}
  loadingText="Buscando..."
/>

// Icon Only
<SearchButton onClick={handleSearch} iconOnly />

// Customizado
<SearchButton 
  onClick={handleSearch} 
  text="Buscar Clientes"
  colorPalette="green"
  size="lg"
/>

// Full Width (mobile)
<SearchButton 
  onClick={handleSearch} 
  fullWidth
/>
```

---

### **4. CleanSearchButton**

BotÃ£o de limpar filtros.

#### **Recursos:**
- âœ… Ãcone de limpar padrÃ£o
- âœ… Variante outline por padrÃ£o
- âœ… Ãcone customizÃ¡vel
- âœ… Modo icon-only
- âœ… Full width

#### **API:**

```typescript
interface CleanSearchButtonProps {
    onClick: () => void              // Callback
    text?: string                    // Texto (default: 'Limpar')
    size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl'
    disabled?: boolean               // Se estÃ¡ desabilitado
    variant?: 'solid' | 'outline' | 'ghost' | 'subtle'
    colorPalette?: 'blue' | 'green' | 'red' | 'gray'
    iconOnly?: boolean               // Apenas Ã­cone
    icon?: ReactNode                 // Ãcone customizado
    fullWidth?: boolean              // Full width
}
```

#### **Exemplos:**

```tsx
// PadrÃ£o
<CleanSearchButton onClick={handleClear} />

// Icon Only
<CleanSearchButton onClick={handleClear} iconOnly />

// Customizado
<CleanSearchButton 
  onClick={handleClear} 
  text="Resetar Filtros"
  colorPalette="red"
  variant="ghost"
/>

// Full Width
<CleanSearchButton 
  onClick={handleClear} 
  fullWidth
/>
```

---

## ğŸ¨ Exemplo Completo: ClientsFilters

### **Antes (90 linhas):**

```tsx
'use client'

export function ClientsFilters() {
    const [search, setSearch] = useState('')
    const [statusFilter, setStatusFilter] = useState('')

    return (
        <Box bg="white" p={4} borderRadius="md" shadow="sm" borderWidth={1}>
            <Flex gap={4} align="end">
                <Field.Root flex={2}>
                    <Field.Label fontSize="sm">Buscar</Field.Label>
                    <Input
                        placeholder="Nome ou email..."
                        value={search}
                        onChange={(e) => setSearch(e.target.value)}
                        size="md"
                    />
                </Field.Root>

                <Field.Root flex={1}>
                    <Field.Label fontSize="sm">Status</Field.Label>
                    <NativeSelectRoot>
                        <NativeSelectField
                            placeholder="Todos"
                            value={statusFilter}
                            onChange={(e) => setStatusFilter(e.target.value)}
                        >
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </NativeSelectField>
                    </NativeSelectRoot>
                </Field.Root>

                <Flex gap={2}>
                    <Button colorPalette="blue" onClick={handleApply}>
                        <Icons.Search /> Filtrar
                    </Button>
                    <Button variant="outline" onClick={handleClear}>
                        <Icons.Clear /> Limpar
                    </Button>
                </Flex>
            </Flex>
        </Box>
    )
}
```

### **Depois (66 linhas - 27% reduÃ§Ã£o!):**

```tsx
'use client'

import { GenericSearchFilterInput, ActiveStatusFilterSelect } from '@/components/forms/filters'
import { SearchButton, CleanSearchButton } from '@/components/ui/button'

export function ClientsFilters() {
    const [search, setSearch] = useState('')
    const [statusFilter, setStatusFilter] = useState('')

    return (
        <Box bg="white" p={4} borderRadius="md" shadow="sm" borderWidth={1}>
            <Flex gap={4} align="end">
                {/* Busca */}
                <GenericSearchFilterInput
                    value={search}
                    onChange={setSearch}
                    onEnter={handleApply}
                    label="Buscar"
                    placeholder="Nome ou email..."
                    flex={2}
                    helperText="Pressione Enter para buscar"
                />

                {/* Status */}
                <ActiveStatusFilterSelect
                    value={statusFilter}
                    onChange={setStatusFilter}
                    label="Status"
                    placeholder="Todos"
                    flex={1}
                />

                {/* BotÃµes */}
                <Flex gap={2}>
                    <SearchButton onClick={handleApply} />
                    <CleanSearchButton onClick={handleClear} />
                </Flex>
            </Flex>
        </Box>
    )
}
```

**BenefÃ­cios:**
- âœ… 27% menos cÃ³digo
- âœ… Mais legÃ­vel e declarativo
- âœ… Componentes reutilizÃ¡veis
- âœ… Suporte a Enter (novo!)
- âœ… Helper text (novo!)
- âœ… Type-safe

---

## ğŸš€ Casos de Uso

### **Caso 1: Filtros de UsuÃ¡rios**

```tsx
export function UsersFilters() {
    const [search, setSearch] = useState('')
    const [statusFilter, setStatusFilter] = useState('')
    const [roleFilter, setRoleFilter] = useState('')

    return (
        <Box bg="white" p={4} borderRadius="md" shadow="sm">
            <Flex gap={4} align="end">
                <GenericSearchFilterInput
                    value={search}
                    onChange={setSearch}
                    onEnter={handleSearch}
                    label="Buscar UsuÃ¡rio"
                    placeholder="Nome ou email..."
                    flex={2}
                />

                <ActiveStatusFilterSelect
                    value={statusFilter}
                    onChange={setStatusFilter}
                    label="Status"
                    flex={1}
                />

                <Field.Root flex={1}>
                    <Field.Label>Role</Field.Label>
                    <NativeSelectRoot>
                        <NativeSelectField value={roleFilter} onChange={...}>
                            <option value="">Todas</option>
                            <option value="admin">Admin</option>
                            <option value="gestor">Gestor</option>
                        </NativeSelectField>
                    </NativeSelectRoot>
                </Field.Root>

                <Flex gap={2}>
                    <SearchButton onClick={handleSearch} />
                    <CleanSearchButton onClick={handleClear} />
                </Flex>
            </Flex>
        </Box>
    )
}
```

---

### **Caso 2: Filtros Simples (1 campo)**

```tsx
export function SimpleSearchFilter() {
    const [search, setSearch] = useState('')

    return (
        <Flex gap={2} align="end">
            <GenericSearchFilterInput
                value={search}
                onChange={setSearch}
                onEnter={handleSearch}
                placeholder="Buscar..."
                flex={1}
            />
            <SearchButton onClick={handleSearch} iconOnly />
            <CleanSearchButton onClick={handleClear} iconOnly />
        </Flex>
    )
}
```

---

### **Caso 3: Filtros com Loading**

```tsx
export function FiltersWithLoading() {
    const [search, setSearch] = useState('')
    const [isSearching, setIsSearching] = useState(false)

    const handleSearch = async () => {
        setIsSearching(true)
        await fetchData()
        setIsSearching(false)
    }

    return (
        <Flex gap={2}>
            <GenericSearchFilterInput
                value={search}
                onChange={setSearch}
                disabled={isSearching}
                flex={1}
            />
            <SearchButton 
                onClick={handleSearch} 
                loading={isSearching}
                loadingText="Buscando..."
            />
        </Flex>
    )
}
```

---

### **Caso 4: Filtros Responsivos**

```tsx
<Flex gap={4} align="end" wrap="wrap">
    <GenericSearchFilterInput
        value={search}
        onChange={setSearch}
        flex={{ base: '100%', md: 2 }}  // Mobile: full width, Desktop: flex 2
    />
    
    <ActiveStatusFilterSelect
        value={statusFilter}
        onChange={setStatusFilter}
        flex={{ base: '100%', md: 1 }}
    />
    
    <Flex gap={2} flex={{ base: '100%', md: 'auto' }}>
        <SearchButton onClick={handleSearch} fullWidth={{ base: true, md: false }} />
        <CleanSearchButton onClick={handleClear} fullWidth={{ base: true, md: false }} />
    </Flex>
</Flex>
```

---

## ğŸ¯ Recursos Adicionais Implementados

### **1. Suporte a Enter**

```tsx
<GenericSearchFilterInput
    onEnter={handleSearch}  // â† Busca ao pressionar Enter!
    helperText="Pressione Enter para buscar"
/>
```

**BenefÃ­cio:** UX melhorada - usuÃ¡rio nÃ£o precisa clicar no botÃ£o.

---

### **2. Helper Text**

```tsx
<GenericSearchFilterInput
    helperText="Busque por nome, email ou telefone"
/>
```

**BenefÃ­cio:** Orienta o usuÃ¡rio sobre o que pode buscar.

---

### **3. Labels CustomizÃ¡veis em StatusSelect**

```tsx
<ActiveStatusFilterSelect
    activeLabel="Habilitado"
    inactiveLabel="Desabilitado"
/>
```

**BenefÃ­cio:** Adapta o texto ao contexto (ex: habilitado/desabilitado, ativo/inativo, etc).

---

### **4. Modo Icon-Only para Layouts Compactos**

```tsx
<SearchButton onClick={handleSearch} iconOnly />
<CleanSearchButton onClick={handleClear} iconOnly />
```

**BenefÃ­cio:** Economiza espaÃ§o em telas pequenas ou layouts compactos.

---

### **5. Loading States**

```tsx
<SearchButton 
    loading={isSearching}
    loadingText="Filtrando dados..."
/>
```

**BenefÃ­cio:** Feedback visual durante busca assÃ­ncrona.

---

## ğŸ“Š ComparaÃ§Ã£o: Antes vs Depois

### **ClientsFilters:**

| MÃ©trica | Antes | Depois | ReduÃ§Ã£o |
|---------|-------|--------|---------|
| Linhas de cÃ³digo | 90 | 66 | **27%** â¬‡ï¸ |
| Imports | 10 | 5 | **50%** â¬‡ï¸ |
| Componentes internos | 0 | 4 reutilizÃ¡veis | âœ… |
| Suporte a Enter | âŒ | âœ… | âœ… |
| Helper Text | âŒ | âœ… | âœ… |
| Manutenibilidade | â­â­â­ | â­â­â­â­â­ | âœ… |

---

## ğŸ”„ ReutilizaÃ§Ã£o em Outros MÃ³dulos

### **UsersFilters (Novo - usando mesmos componentes):**

```tsx
export function UsersFilters() {
    const [search, setSearch] = useState('')
    const [statusFilter, setStatusFilter] = useState('')

    return (
        <Box bg="white" p={4} borderRadius="md" shadow="sm">
            <Flex gap={4} align="end">
                <GenericSearchFilterInput
                    value={search}
                    onChange={setSearch}
                    onEnter={handleApply}
                    label="Buscar UsuÃ¡rio"
                    placeholder="Nome ou email..."
                    flex={2}
                />

                <ActiveStatusFilterSelect
                    value={statusFilter}
                    onChange={setStatusFilter}
                    label="Status"
                    flex={1}
                />

                <Flex gap={2}>
                    <SearchButton onClick={handleApply} />
                    <CleanSearchButton onClick={handleClear} />
                </Flex>
            </Flex>
        </Box>
    )
}
```

**Resultado:** 
- âœ… CÃ³digo praticamente idÃªntico (copy-paste!)
- âœ… UI consistente entre mÃ³dulos
- âœ… ManutenÃ§Ã£o centralizada

---

## ğŸ¨ Layouts Sugeridos

### **Layout Horizontal (Desktop):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Buscar.................] [Statusâ–¼] [Filtrar] [Limpar] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```tsx
<Flex gap={4} align="end">
    <GenericSearchFilterInput flex={2} />
    <ActiveStatusFilterSelect flex={1} />
    <Flex gap={2}>
        <SearchButton />
        <CleanSearchButton />
    </Flex>
</Flex>
```

---

### **Layout Vertical (Mobile):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Buscar.........] â”‚
â”‚ [Statusâ–¼........] â”‚
â”‚ [Filtrar] [Limpar] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```tsx
<Stack gap={3}>
    <GenericSearchFilterInput />
    <ActiveStatusFilterSelect />
    <Flex gap={2}>
        <SearchButton fullWidth />
        <CleanSearchButton fullWidth />
    </Flex>
</Stack>
```

---

### **Layout Compacto (Icon-Only):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Buscar.........] [ğŸ”] [âœ–ï¸] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```tsx
<Flex gap={2} align="center">
    <GenericSearchFilterInput flex={1} />
    <SearchButton iconOnly />
    <CleanSearchButton iconOnly />
</Flex>
```

---

## ğŸš€ PrÃ³ximos Componentes (Futuro)

### **1. DateRangeFilterInput**
Filtro de intervalo de datas.

```tsx
<DateRangeFilterInput
  startDate={startDate}
  endDate={endDate}
  onStartDateChange={setStartDate}
  onEndDateChange={setEndDate}
  label="PerÃ­odo"
/>
```

**Uso:** RelatÃ³rios, histÃ³ricos, logs.

---

### **2. RoleFilterSelect**
Select de roles (comum em usuÃ¡rios).

```tsx
<RoleFilterSelect
  value={roleFilter}
  onChange={setRoleFilter}
  roles={['admin', 'gestor', 'operador', 'assistente']}
  label="Perfil"
/>
```

**Uso:** Filtros de usuÃ¡rios.

---

### **3. ClientFilterSelect**
Select de clientes (para filtrar por empresa).

```tsx
<ClientFilterSelect
  value={clientId}
  onChange={setClientId}
  label="Cliente"
/>
```

**Uso:** Filtros de usuÃ¡rios, eventos.

---

### **4. MultiSelectFilter**
Select mÃºltiplo com checkboxes.

```tsx
<MultiSelectFilter
  values={selectedCategories}
  onChange={setSelectedCategories}
  options={categories}
  label="Categorias"
/>
```

**Uso:** Filtros complexos com mÃºltiplas seleÃ§Ãµes.

---

### **5. RangeFilterInput**
Input de faixa numÃ©rica (min/max).

```tsx
<RangeFilterInput
  min={minPrice}
  max={maxPrice}
  onMinChange={setMinPrice}
  onMaxChange={setMaxPrice}
  label="Faixa de PreÃ§o"
/>
```

**Uso:** Filtros de valores, preÃ§os, quantidade.

---

## ğŸ“ Estrutura de Arquivos

```
src/components/
â”œâ”€â”€ forms/
â”‚   â””â”€â”€ filters/
â”‚       â”œâ”€â”€ GenericSearchFilterInput.tsx   â† Input de busca
â”‚       â”œâ”€â”€ ActiveStatusFilterSelect.tsx   â† Select de status
â”‚       â”œâ”€â”€ index.ts                       â† Barrel export
â”‚       â””â”€â”€ README.md                      â† Esta documentaÃ§Ã£o
â””â”€â”€ ui/
    â””â”€â”€ button/
        â”œâ”€â”€ SearchButton.tsx               â† BotÃ£o de filtrar
        â”œâ”€â”€ CleanSearchButton.tsx          â† BotÃ£o de limpar
        â””â”€â”€ index.ts                       â† Barrel export
```

---

## ğŸ“– ImportaÃ§Ã£o

### **Filtros:**
```tsx
import { 
    GenericSearchFilterInput, 
    ActiveStatusFilterSelect 
} from '@/components/forms/filters'
```

### **BotÃµes:**
```tsx
import { SearchButton, CleanSearchButton } from '@/components/ui/button'
```

---

## âœ… Checklist para Criar Novo Filtro

- [ ] Identificar campos necessÃ¡rios
- [ ] Usar `GenericSearchFilterInput` para busca
- [ ] Usar `ActiveStatusFilterSelect` para status (se aplicÃ¡vel)
- [ ] Usar `SearchButton` e `CleanSearchButton`
- [ ] Adicionar `onEnter` no input de busca
- [ ] Adicionar helper text quando Ãºtil
- [ ] Testar layout responsivo
- [ ] Sincronizar com URL (search params)
- [ ] Adicionar loading states (se aplicÃ¡vel)

---

## ğŸ‰ ConclusÃ£o

**Sistema de Filtros:**
- âœ… 4 componentes reutilizÃ¡veis criados
- âœ… 27% menos cÃ³digo no ClientsFilters
- âœ… Suporte a Enter para buscar
- âœ… Helper text para orientar usuÃ¡rio
- âœ… Loading states integrados
- âœ… Icon-only mode
- âœ… Layout flexÃ­vel (Flex)
- âœ… Type-safe e documentado
- âœ… Pronto para usar em todos os mÃ³dulos

**Criar filtros agora Ã© rÃ¡pido, fÃ¡cil e consistente!** ğŸš€ğŸ”

